<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Group-specific parameters of mixed models random effects — estimate_grouplevel • modelbased</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Group-specific parameters of mixed models random effects — estimate_grouplevel" />
<meta property="og:description" content="Extract random parameters of each individual group in the context of mixed models. Can be reshaped to be of the same dimensions as the original data, which can be useful to add the random effects to the original data." />
<meta property="og:image" content="/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modelbased</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/visualisation_matrix.html">Data grids</a>
    </li>
    <li>
      <a href="../articles/estimate_means.html">Marginal means</a>
    </li>
    <li>
      <a href="../articles/estimate_contrasts.html">Contrast analysis</a>
    </li>
    <li>
      <a href="../articles/estimate_response.html">Use a model to make predictions</a>
    </li>
    <li>
      <a href="../articles/describe_nonlinear.html">Describe non-linear curves</a>
    </li>
    <li>
      <a href="../articles/estimate_grouplevel.html">Estimate and re-use Random Effects</a>
    </li>
    <li>
      <a href="../articles/modelisation_approach.html">The modelisation approach</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/easystats/modelbased/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Group-specific parameters of mixed models random effects</h1>
    <small class="dont-index">Source: <a href='https://github.com/easystats/modelbased/blob/master/R/estimate_grouplevel.R'><code>R/estimate_grouplevel.R</code></a>, <a href='https://github.com/easystats/modelbased/blob/master/R/reshape_random.R'><code>R/reshape_random.R</code></a></small>
    <div class="hidden name"><code>estimate_grouplevel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract random parameters of each individual group in the context of mixed models. Can be reshaped to be of the same dimensions as the original data, which can be useful to add the random effects to the original data.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>estimate_grouplevel</span><span class='op'>(</span><span class='va'>model</span>, type <span class='op'>=</span> <span class='st'>"random"</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>reshape_random</span><span class='op'>(</span><span class='va'>x</span>, indices <span class='op'>=</span> <span class='st'>"all"</span>, <span class='va'>...</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A mixed model with random effects.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>If <code>"random"</code> (default), the coefficients are the ones estimated natively by the model (as they are returned by, for instance, <code><a href='https://rdrr.io/pkg/lme4/man/ranef.html'>lme4::ranef()</a></code>). They correspond to the deviation of each individual group from their fixed effect. As such, a coefficient close to 0 means that the participants' effect is the same as the population-level effect (in other words, it is "in the norm"). If "total", it will return the sum of the random effect and its corresponding fixed effects. These are known as BLUPs (Best Linear Unbiased Predictions). This argument can be used to reproduce the results given by <code><a href='https://rdrr.io/pkg/lme4/man/ranef.html'>lme4::ranef()</a></code> and <code><a href='https://rdrr.io/r/stats/coef.html'>coef()</a></code> (see <code><a href='https://rdrr.io/pkg/lme4/man/merMod-class.html'>?coef.merMod</a></code>). Note that BLUPs currently don't have uncertainty indices (such as SE and CI), as these are not computable.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments passed to or from other methods.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>The output of <code>estimate_grouplevel()</code>.</p></td>
    </tr>
    <tr>
      <th>indices</th>
      <td><p>A list containing the indices to extract.</p></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/lme4/lme4/'>"lme4"</a></span><span class='op'>)</span> <span class='op'>&amp;&amp;</span> <span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://easystats.github.io/see/'>"see"</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Random intercept ------------</span></span>
<span class='r-in'><span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/lme4/man/lmer.html'>lmer</a></span><span class='op'>(</span><span class='va'>mpg</span> <span class='op'>~</span> <span class='va'>hp</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>|</span> <span class='va'>carb</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>random</span> <span class='op'>&lt;-</span> <span class='fu'>estimate_grouplevel</span><span class='op'>(</span><span class='va'>model</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>random</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Visualize random effects</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>random</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Show group-specific effects</span></span>
<span class='r-in'><span class='fu'>estimate_grouplevel</span><span class='op'>(</span><span class='va'>model</span>, deviation <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Reshape to wide data so that it matches the original dataframe...</span></span>
<span class='r-in'><span class='va'>reshaped</span> <span class='op'>&lt;-</span> <span class='fu'>reshape_random</span><span class='op'>(</span><span class='va'>random</span>, indices <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Coefficient"</span>, <span class='st'>"SE"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># ... and can be easily combined</span></span>
<span class='r-in'><span class='va'>alldata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>reshaped</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Use summary() to remove duplicated rows</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>reshaped</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loading required package: see</span>
<span class='r-plt'><img src='estimate_grouplevel-1.png' alt='' width='700' height='433' /></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   carb carb_Coefficient_Intercept carb_SE_Intercept</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1    4                -0.77955416         0.7829275</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2    1                 0.40506064         0.8390523</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3    2                 0.11088289         0.7829275</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4    3                -0.32486359         0.9369268</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5    6                 0.09296535         1.0007322</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6    8                 0.49550886         1.0007322</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://github.com/mattansb" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


